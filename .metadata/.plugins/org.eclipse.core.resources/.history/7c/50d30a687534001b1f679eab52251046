package com.example.domain;

public class CompanyAPI {


	/** #1.쉬운 코드에프 객체 생성 및 클라이언트 정보 설정 */
	EasyCodef codef = new EasyCodef();
	codef.setClientInfoForDemo(EasyCodefClientInfo.DEMO_CLIENT_ID, EasyCodefClientInfo.c00b2c3e-3430-4273-846e-a65de3dd798a);
	codef.setPublicKey(EasyCodefClientInfo.PUBLIC_KEY);



	/** #5.요청 파라미터 설정 - 각 상품별 파라미터를 설정(https://developer.codef.io/products) */
	HashMap<String, Object> parameterMap = **new** HashMap<String, Object>();
	parameterMap.put("organization", "0004"); // 기관코드 설정

	List<HashMap<String, String>> reqIdentityList = **new** ArrayList<HashMap<String, String>>();
	HashMap<String, String> reqIdentityMap1 = **new** HashMap<String, String>();
	reqIdentityMap1.put("reqIdentity", "3333344444");
	reqIdentityList.add(reqIdentityMap1);

	HashMap<String, String> reqIdentityMap2 = **new** HashMap<String, String>();
	reqIdentityMap2.put("reqIdentity", "1234567890");
	reqIdentityList.add(reqIdentityMap2);
	parameterMap.put("reqIdentityList", reqIdentityList);

	/** #6.코드에프 정보 조회 요청 - 서비스타입(API:정식, DEMO:데모, SANDBOX:샌드박스) */
	String productUrl = "/v1/kr/public/nt/business/status"; // (예시)사업자등록상태(휴폐업조회) URL
	String result = codef.requestProduct(productUrl, EasyCodefServiceType.SANDBOX, parameterMap);



	/**	#7.코드에프 정보 결과 확인	*/
	System.out.println(result);

	HashMap<String, Object> responseMap = new ObjectMapper().readValue(result, HashMap.class);
	HashMap<String, Object> resultMap = (HashMap<String, Object>)responseMap.get("result");

	assertEquals("코드에프 상품 요청 결과 실패(반환된 코드와 메시지 확인 필요)", "CF-00000", (String)resultMap.get("code"));
}
